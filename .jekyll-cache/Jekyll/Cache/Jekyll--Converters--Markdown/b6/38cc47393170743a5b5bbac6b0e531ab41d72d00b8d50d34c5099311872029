I"t¾<h2 id="aop2-aop-ì ìš©í•´ë³´ê¸°with-ìˆœìˆ˜-ìë°”-spring-aop">AOP(2) AOP ì ìš©í•´ë³´ê¸°(with ìˆœìˆ˜ ìë°”, Spring AOP)</h2>

<h2 id="ìˆœìˆ˜ìë°”ë¡œ-aop-êµ¬í˜„í•˜ê¸°">ìˆœìˆ˜ìë°”ë¡œ AOP êµ¬í˜„í•˜ê¸°</h2>

<p><strong>Proxyë¥¼ ì´ìš©í•´ cross-cutting concernì´ core concernì— ì‚½ì…ëœ ê²ƒì²˜ëŸ¼ êµ¬í˜„í•´ë³´ê¸°</strong></p>

<ul>
  <li>í™˜ê²½  <br />
jdk 1.8  <br />
â€”</li>
</ul>

<p>ê°„ë‹¨í•˜ê²Œ core concern ìœ¼ë¡œëŠ” ë§ì…ˆê³¼ ëºì…ˆì„ êµ¬í•´ì£¼ëŠ” ê³„ì‚°ê¸°ë¥¼ êµ¬í˜„í•˜ê³ , cross-cutting concernìœ¼ë¡œëŠ” ì‹¤í–‰ì‹œê°„ì„ êµ¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ êµ¬í˜„í•´ë³´ì.</p>

<p><strong>Dynamic Proxyë¥¼ ì´ìš©í•˜ì—¬ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">java.lang.reflect.Proxy</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ Proxy ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Proxy</span><span class="o">.</span><span class="na">newProxyInstance</span><span class="o">(</span><span class="nc">ClassLaoder</span> <span class="n">loader</span><span class="o">,</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">interfaces</span><span class="o">,</span> <span class="nc">InvocationHandler</span> <span class="n">h</span><span class="o">)</span>
<span class="kd">throws</span> <span class="nc">IllegalArgumentException</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ClassLaoder  loader</code> : ì‹¤ì œë¡œ core concernì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´ â†’ í”„ë¡ì‹œë¥¼ ë§Œë“¤ í´ë˜ìŠ¤ ë¡œë”</li>
  <li><code class="language-plaintext highlighter-rouge">Class&lt;?&gt;[] interfaces</code> : ê°ì²´ê°€ êµ¬í˜„í•˜ëŠ” ëª¨ë“  ì¸í„°í˜ì´ìŠ¤ ì¤‘ í”„ë¡ì‹œë¥¼ ë§Œë“¤ ì¸í„°í˜ì´ìŠ¤(ë°°ì—´)</li>
  <li><code class="language-plaintext highlighter-rouge">InvocationHandler</code>  <code class="language-plaintext highlighter-rouge">h</code> : ë©”ì„œë“œ í˜¸ì¶œì„ ì²˜ë¦¬í•˜ëŠ” í•¸ë“¤ëŸ¬ InvocationHandler ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´
    <ul>
      <li>ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  í´ë˜ìŠ¤ë¥¼ ê°ì²´í™”í•˜ëŠ” ì‘ì—… í•„ìš”</li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>ì¸í„°í˜ì´ìŠ¤ ì •ì˜</p>

    <p>Calculation.java</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">package</span> <span class="nn">com.exam.aop.entity</span><span class="o">;</span>
    
 <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Calculation</span> <span class="o">{</span>
 	<span class="kt">int</span> <span class="nf">sum</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">);</span>
 	<span class="kt">int</span> <span class="nf">division</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>í´ë˜ìŠ¤ ì •ì˜</p>

    <p>CalculationImpl.java</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">package</span> <span class="nn">com.exam.aop.entity</span><span class="o">;</span>
    
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculationImpl</span> <span class="kd">implements</span> <span class="nc">Calculation</span> <span class="o">{</span>
    	
 	<span class="kd">private</span> <span class="nc">CalculationImpl</span> <span class="n">calculation</span><span class="o">;</span>
    
 	<span class="kd">public</span> <span class="nf">CalculationImpl</span><span class="o">()</span> <span class="o">{</span>
 		<span class="kd">super</span><span class="o">();</span>
 	<span class="o">}</span>
    	
 	<span class="kd">public</span> <span class="nc">CalculationImpl</span> <span class="nf">getCalculation</span><span class="o">()</span> <span class="o">{</span>
 		<span class="k">return</span> <span class="n">calculation</span><span class="o">;</span>
 	<span class="o">}</span>
    
 	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCalculation</span><span class="o">(</span><span class="nc">CalculationImpl</span> <span class="n">calculation</span><span class="o">)</span> <span class="o">{</span>
 		<span class="k">this</span><span class="o">.</span><span class="na">calculation</span> <span class="o">=</span> <span class="n">calculation</span><span class="o">;</span>
 	<span class="o">}</span>
    
 	<span class="nd">@Override</span>
 	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">sum</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
 		<span class="k">try</span> <span class="o">{</span>
 			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>
 		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 			<span class="c1">// TODO Auto-generated catch block</span>
 			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
 		<span class="o">}</span>
 		<span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">;</span>
 	<span class="o">}</span>
    
 	<span class="nd">@Override</span>
 	<span class="kd">public</span> <span class="kt">int</span> <span class="nf">division</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
 		<span class="k">try</span> <span class="o">{</span>
 			<span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>
 		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 			<span class="c1">// TODO Auto-generated catch block</span>
 			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
 		<span class="o">}</span>
 		<span class="k">return</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span><span class="o">;</span>
 	<span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>main ì‹¤í–‰ ì½”ë“œ</p>

    <p>Program.java</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">package</span> <span class="nn">com.exam.aop</span><span class="o">;</span>
    
 <span class="kn">import</span> <span class="nn">java.lang.reflect.InvocationHandler</span><span class="o">;</span>
    
 <span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.lang.reflect.Proxy</span><span class="o">;</span>
    
 <span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
    
 <span class="kn">import</span> <span class="nn">com.exam.aop.entity.Calculation</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">com.exam.aop.entity.CalculationImpl</span><span class="o">;</span>
    
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Program</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    		
 		<span class="cm">/**
 		 * ìˆœìˆ˜ ìë°”ë¡œ aop êµ¬í˜„
 		 */</span>
    		
   <span class="nc">Calculation</span> <span class="n">calculation</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CalculationImpl</span><span class="o">();</span>
    		
   <span class="nc">Calculation</span> <span class="n">proxyCalc</span> <span class="o">=</span>
     <span class="o">(</span><span class="nc">Calculation</span><span class="o">)</span> <span class="nc">Proxy</span><span class="o">.</span><span class="na">newProxyInstance</span><span class="o">(</span><span class="nc">CalculationImpl</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">(),</span>
       <span class="k">new</span> <span class="nc">Class</span><span class="o">[]</span> <span class="o">{</span><span class="nc">Calculation</span><span class="o">.</span><span class="na">class</span><span class="o">},</span>
 	  <span class="k">new</span> <span class="nf">InvocationHandler</span><span class="o">()</span> <span class="o">{</span>
         <span class="nd">@Override</span>
         <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">invoke</span><span class="o">(</span><span class="nc">Object</span> <span class="n">proxy</span><span class="o">,</span> <span class="nc">Method</span> <span class="n">method</span><span class="o">,</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
 			<span class="c1">//cross concern</span>
 			<span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    						
 			<span class="c1">//core concern í˜¸ì¶œ</span>
 			<span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">calculation</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    						
 			<span class="c1">//cross concern</span>
 			<span class="kt">long</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
 			<span class="nc">String</span> <span class="n">message</span> <span class="o">=</span> <span class="o">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="o">)+</span><span class="s">"ms ì‹œê°„ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤."</span><span class="o">;</span>
 			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    						
 			<span class="k">return</span> <span class="n">result</span><span class="o">;</span>
 		<span class="o">}</span>
 	  <span class="o">}</span>
 	<span class="o">);</span>
    		
 	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"total is %d\n"</span><span class="o">,</span><span class="n">calculation</span><span class="o">.</span><span class="na">sum</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">5</span><span class="o">));</span>
 	<span class="c1">// total is 15</span>
 	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"total is %d\n"</span><span class="o">,</span><span class="n">proxyCalc</span><span class="o">.</span><span class="na">division</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">5</span><span class="o">));</span>
 	<span class="c1">// 215ms ì‹œê°„ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤.</span>
 	<span class="c1">// total is 5</span>
    		
 	<span class="c1">// ê°ì²´ í•˜ë‚˜ì— ëŒ€í•´ì„œ ì‘ì„±í•˜ë©´ ëª¨ë“  í•¨ìˆ˜ì— ëŒ€í•´ cross concernì„ ì‚½ì… ê°€ëŠ¥ í•¨</span>
 	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"total is %f\n"</span><span class="o">,</span><span class="n">proxyCalc</span><span class="o">.</span><span class="na">division</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">5</span><span class="o">));</span>
 	<span class="c1">// 215ms ì‹œê°„ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤.</span>
 	<span class="c1">// total is 2</span>
 	<span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<p><img src="../../../../assets/images/posts/web/2022-04-22-aop2-1.png" alt="Untitled" /></p>

<ol>
  <li>Proxy.newProxyInstanceëŠ” Objectë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ í˜•ë³€í™˜ì„ í•´ì¤€ë‹¤.</li>
  <li>class ë¡œë”</li>
  <li>êµ¬í˜„ ì¸í„°í˜ì´ìŠ¤</li>
  <li>í•¸ë“¤ëŸ¬ ìµëª…í•¨ìˆ˜ <strong>InvocationHandler</strong> êµ¬í˜„
    <ul>
      <li>Invocation Handler ëŠ” invoke() ë©”ì†Œë“œ í•˜ë‚˜ë§Œ ê°€ì§€ê³  ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.</li>
      <li>invoke() ë©”ì†Œë“œëŠ” í”„ë¡ì‹œê°€ í˜¸ì¶œë˜ì—ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ë©”ì†Œë“œì´ë‹¤. â†’  <strong>core concern í˜¸ì¶œ</strong></li>
      <li>ObjectÂ invoke(ObjectÂ proxy, MethodÂ method, Object[]Â args) throws Throwable
        <ul>
          <li><code class="language-plaintext highlighter-rouge">proxy</code> : ë©”ì„œë“œê°€ í˜¸ì¶œëœ <strong>í”„ë¡ì‹œ ì¸ìŠ¤í„´ìŠ¤</strong></li>
          <li><strong><code class="language-plaintext highlighter-rouge">method</code> :</strong> í”„ë¡ì‹œë¥¼ ìƒì„±í•œ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‹¤í–‰í•  <strong>ë©”ì†Œë“œ ì¸ìŠ¤í„´ìŠ¤</strong></li>
          <li><code class="language-plaintext highlighter-rouge">args</code> : í”„ë¡ì‹œ ì¸ìŠ¤í„´ìŠ¤ì˜ <strong>ë©”ì„œë“œ í˜¸ì¶œì—ì„œ ì „ë‹¬ëœ ì¸ìˆ˜ ê°’</strong>ì„ í¬í•¨í•˜ëŠ” ê°œì²´ ë°°ì—´
            <ul>
              <li>ì¸í„°í˜ì´ìŠ¤ ë©”ì„œë“œì— ì¸ìˆ˜ê°€ ì—†ìœ¼ë©´ null</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p><strong>cross-cutting concernê³¼ core concernì„ ìˆ˜í–‰í•˜ëŠ” ë¡œì§ì´ êµ¬í˜„ë˜ëŠ” ê³³.</strong></p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// ê³µí†µ ê¸°ëŠ¥ (cross concern)</span>
  <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
        						
  <span class="c1">//í•µì‹¬ ë¡œì§(core concern) í˜¸ì¶œ</span>
  <span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">calculation</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
        						
  <span class="c1">//ê³µí†µ ê¸°ëŠ¥ (cross concern)</span>
  <span class="kt">long</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
  <span class="nc">String</span> <span class="n">message</span> <span class="o">=</span> <span class="o">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="o">)+</span><span class="s">"ms ì‹œê°„ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤."</span><span class="o">;</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<p>í”„ë¡ì‹œ ì‹¤í–‰ ì½”ë“œë¥¼ í™•ì¸í•´ë³´ì.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"total is %d\n"</span><span class="o">,**</span><span class="n">calculation</span><span class="o">.</span><span class="na">sum</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">5</span><span class="o">)**);</span>
	<span class="c1">// total is 15</span>
	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"total is %d\n"</span><span class="o">,**</span><span class="n">proxyCalc</span><span class="o">.</span><span class="na">division</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">5</span><span class="o">)**);</span>
	<span class="c1">// 215ms ì‹œê°„ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤.</span>
	<span class="c1">// total is 5</span>
		
	<span class="c1">// ê°ì²´ í•˜ë‚˜ì— ëŒ€í•´ì„œ ì‘ì„±í•˜ë©´ ëª¨ë“  í•¨ìˆ˜ì— ëŒ€í•´ cross concernì„ ì‚½ì… ê°€ëŠ¥ í•¨</span>
	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"total is %f\n"</span><span class="o">,**</span><span class="n">proxyCalc</span><span class="o">.</span><span class="na">division</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">5</span><span class="o">)**);</span>
	<span class="c1">// 215ms ì‹œê°„ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤.</span>
	<span class="c1">// total is 5</span>
</code></pre></div></div>

<ul>
  <li>proxy calculation ê°ì²´<strong>(proxyCalc)</strong>ë¥¼ ìƒì„±í•˜ê³  ì¸í„°í˜ì´ìŠ¤ì— êµ¬í˜„ë˜ì–´ ìˆëŠ” ë©”ì†Œë“œë¥¼ ë°”ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.</li>
  <li>â–¶ï¸ <strong>core concernì¸ sumì™€ divisionì„ ë°”ë¡œ ë¶€ë¥´ëŠ” ê²ƒ ê°™ì•„ë³´ì´ì§€ë§Œ, í”„ë¡ì‹œì˜ handlerê°€ ì‹¤í–‰ëœ ê²ƒì´ê³  ê·¸ ê³³ì—ì„œ  core concernê³¼ cross-cutting concernì´ ìˆ˜í–‰ë˜ê³  ìˆë‹¤.</strong></li>
  <li>í•˜ë‚˜ì˜ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ë“  í•¨ìˆ˜ì—ì„œ cross-cutting concern ìˆ˜í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>

<blockquote>
  <p>ì´ ê°œë…ì€ spring ê³¼ ê´€ë ¨ì´ ì—†ì§€ë§Œ springì˜ DIë¡œ í”„ë¡ì‹œë¥¼ êµ¬í˜„í•˜ë©´ ì½”ë“œì˜ ë³€ê²½ê³¼ ìˆ˜ì • ì—†ì´ í”„ë¡ì‹œë¥¼ ì‚½ì…/ì‚­ì œí•  ìˆ˜ ìˆë‹¤.</p>

</blockquote>

<h2 id="spring-aopë¡œ-aop-êµ¬í˜„í•˜ê¸°">Spring AOPë¡œ AOP êµ¬í˜„í•˜ê¸°</h2>

<ol>
  <li>
    <p>ì˜ì¡´ì„± ì¶”ê°€</p>

    <p><strong>pom.xml</strong></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="o">&lt;!--</span> <span class="nl">https:</span><span class="c1">//mvnrepository.com/artifact/org.springframework/spring-aop --&gt;</span>
  	<span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
 	    <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
 	    <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">spring</span><span class="o">-</span><span class="n">aop</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
 	    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">5.3</span><span class="o">.</span><span class="mi">18</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
 	<span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>corss-cutting concern ì„ ì²˜ë¦¬í•  ë¡œì§ êµ¬í˜„</p>

    <p>ì•ì˜ ê²Œì‹œë¬¼ì—ì„œ ë³´ì•˜ë“¯ì´ ê°ì²´ê°€ ì–´ë–¤ ê³µí†µ ê¸°ëŠ¥ì´ ì–´ë–¤ í•µì‹¬ ë¡œì§ì— ì ìš©ë˜ëŠ” ì§€ë¥¼ ì˜ë¯¸í•˜ëŠ” Adviceì˜ ì¢…ë¥˜ì—ëŠ” Before, After, AfterAround, AfterReturning  ,AfterThrowing ì´ ìˆì—ˆë‹¤.</p>

    <p>ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ê³µí†µ ê¸°ëŠ¥(Aspect)ì€ í•µì‹¬ë¡œì§ ì „í›„ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ë¯€ë¡œ Aroundë¥¼ ìˆ˜í–‰í•  ë¡œì§ì„ êµ¬í˜„í•œë‹¤.</p>

    <p>Adviceì˜ ì‹¤í–‰ ì‹œì ì„ í™•ì¸í•˜ê¸° ìœ„í•´ Aroud ë¿ë§Œ ì•„ë‹ˆë¼ Before, AfterAround, AfterReturning ê¹Œì§€ Aspectë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤.</p>

    <ul>
      <li><strong>LogAroundAdvice.java</strong>
        <ol>
          <li><code class="language-plaintext highlighter-rouge">MethodInterceptor</code>ì¸í„°í˜ì´ìŠ¤ ìƒì†
            <ul>
              <li><code class="language-plaintext highlighter-rouge">MethodInterceptor</code> :  í”„ë¡ì‹œ ê°ì²´ì˜ ì½œë°± ê¸°ëŠ¥ ì¤„ í•˜ë‚˜ë¡œ, í”„ë¡ì‹œ ê°ì²´ì—ì„œ <strong>íƒ€ê²Ÿ ê°ì²´ë¥¼ í˜¸ì¶œí•˜ê¸° ì „, í›„ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì¶”ê°€(Around Aspect)</strong>í•˜ê±°ë‚˜, íƒ€ê²Ÿ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê°ì²´ì˜ ë©”ì†Œë“¤ë¥´ í˜¸ì¶œí•˜ê±°ë‚˜, ì¸ì ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">invoke()</code> ì˜¤ë²„ë¼ì´ë“œ
            <ul>
              <li><code class="language-plaintext highlighter-rouge">invocation.proceed();</code> : í•µì‹¬ ë¡œì§ í˜¸ì¶œ</li>
              <li>ìë°”ë§Œìœ¼ë¡œ êµ¬í˜„ í–ˆì„ ë•Œì™€ëŠ” ë‹¤ë¥´ê²Œ íŒŒë¼ë¯¸í„°ë¥¼ ë„˜ê¸¸ í•„ìš”ì—†ìŒ.</li>
            </ul>
          </li>
        </ol>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">package</span> <span class="nn">com.exam.aop.advice</span><span class="o">;</span>
        
  <span class="kn">import</span> <span class="nn">org.aopalliance.intercept.MethodInterceptor</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.aopalliance.intercept.MethodInvocation</span><span class="o">;</span>
        
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogAroundAdvice</span> <span class="kd">implements</span> <span class="nc">MethodInterceptor</span> <span class="o">{</span>
        
  	<span class="nd">@Override</span>
  	<span class="kd">public</span> <span class="nc">Object</span> <span class="nf">invoke</span><span class="o">(</span><span class="nc">MethodInvocation</span> <span class="n">invocation</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
  		<span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
        		
  		<span class="c1">//core concern í˜¸ì¶œ</span>
  		<span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invocation</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
        		
  		<span class="c1">//cross concern</span>
  		<span class="kt">long</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
  		<span class="nc">String</span> <span class="n">message</span> <span class="o">=</span> <span class="o">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="o">)+</span><span class="s">"ms ì‹œê°„ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤."</span><span class="o">;</span>
  		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        		
  		<span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  	<span class="o">}</span>
        
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li><strong>LogAfterReturningAdvice.java</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">AfterReturningAdvice</code>  ìƒì†
            <ul>
              <li>íƒ€ê²Ÿ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œ í›„ ê³µí†µ ê¸°ëŠ¥ì„ ì ìš©í•˜ê³  ì‹¶ì„ ë•Œì— ì‚¬ìš©.</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">afterReturning(Object returnValue, Method method, Object[] args, Object target)</code>
            <ul>
              <li>ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•Šê³  ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì„ ì™„ë£Œí•œ ì´í›„ì— ì‹¤í–‰.</li>
              <li><code class="language-plaintext highlighter-rouge">Object returnValue</code> : íƒ€ê²Ÿ ê°ì²´ì˜ ë©”ì„œë“œê°€ ë¦¬í„´í•œ ê°’</li>
              <li><code class="language-plaintext highlighter-rouge">Method method</code> : íƒ€ê²Ÿ ê°ì²´ì—ì„œ ì‹¤ì œë¡œ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œëŠ” ë‚˜íƒ€ë‚´ëŠ” ë©”ì„œë“œ ê°ì²´</li>
              <li><code class="language-plaintext highlighter-rouge">Object[] args</code> : ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì „ë‹¬ëœ ì¸ì ëª©ë¡</li>
              <li><code class="language-plaintext highlighter-rouge">Object target</code> : ì‹¤ì œ íƒ€ì¼“ ê°ì²´</li>
            </ul>
          </li>
        </ul>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">package</span> <span class="nn">com.exam.aop.advice</span><span class="o">;</span>
        
  <span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
        
  <span class="kn">import</span> <span class="nn">org.springframework.aop.AfterReturningAdvice</span><span class="o">;</span>
        
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogAfterReturningAdvice</span> <span class="kd">implements</span> <span class="nc">AfterReturningAdvice</span> <span class="o">{</span>
        
  	<span class="cm">/*
  	 * Object returnValue : ëŒ€ìƒ ê°ì²´ì˜ ë°˜í™˜ê°’
  	 */</span>
  	<span class="nd">@Override</span>
  	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterReturning</span><span class="o">(</span><span class="nc">Object</span> <span class="n">returnValue</span><span class="o">,</span> <span class="nc">Method</span> <span class="n">method</span><span class="o">,</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">target</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
  		<span class="c1">// TODO Auto-generated method stub</span>
  		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"AfterReturn &gt;&gt;&gt; returnValue : "</span><span class="o">+</span><span class="n">returnValue</span><span class="o">+</span><span class="s">", method : "</span><span class="o">+</span><span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        		
  	<span class="o">}</span>
        
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li><strong>LogAfterThrowingAdvice.java</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">ThrowsAdvice</code> ìƒì†
            <ul>
              <li>íƒ€ê²Ÿ ê°í…Œì˜ ë©”ì„œë“œì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ê³µí†µ ê¸°ëŠ¥ì„ ì ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©.</li>
              <li>ë³„ë„ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ìˆì§€ ì•Šê³  ì˜ë¯¸ë§Œ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤</li>
              <li>ì˜ˆì™¸ê°€ ë°œìƒí•¨ì— ë”°ë¼ ì¸ì ê°’ì´ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì— êµ¬í˜„í•  ë©”ì†Œë“œë¥¼ ì •ì˜í•  ìˆ˜ ì—†ë‹¤.</li>
            </ul>
          </li>
          <li>afterThrowing()
            <ul>
              <li>íƒ€ê²Ÿ ê°ì²´ì˜ ë©”ì„œë“œì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ì™€ ê°€ì¥ í°ê²í•œ ì˜ˆì™¸ íƒ€ì…ì„ ì¸ìê°’ìœ¼ë¡œ ë°›ëŠ” afterThorwing() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤ â‡’ ë‹¤í˜•ì„± !</li>
            </ul>
          </li>
        </ul>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">package</span> <span class="nn">com.exam.aop.advice</span><span class="o">;</span>
        
  <span class="kn">import</span> <span class="nn">org.springframework.aop.ThrowsAdvice</span><span class="o">;</span>
        
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogAfterThrowingAdvice</span> <span class="kd">implements</span> <span class="nc">ThrowsAdvice</span><span class="o">{</span>
  	<span class="cm">/*
  	 * ë§¤ê°œë³€ìˆ˜ë¡œ ì²˜ë¦¬í•  ì˜ˆì™¸ë¥¼ ë°›ëŠ”ë‹¤.
  	 */</span>
  	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterThrowing</span><span class="o">(</span><span class="nc">ArithmeticException</span> <span class="n">e</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span><span class="o">{</span>
  		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"AfterThrowing &gt;&gt;&gt; "</span><span class="o">+</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
  	<span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
      <li><strong>LogBeforeAdvice.java</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">MethodBeforeAdvic</code> ìƒì†
            <ul>
              <li>íƒ€ê²Ÿ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— ê³µí†µ ê¸°ëŠ¥ì„ ì ìš©í•˜ê³  ì‹¶ì„ ë•Œì— ì‚¬ìš©</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">before(Method method, Object[] args, Object target)</code>
            <ul>
              <li>íƒ€ê²Ÿ ê°ì²´ì˜ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê¸° ì „ì— ì‹¤í–‰.</li>
              <li><code class="language-plaintext highlighter-rouge">Method method</code> : íƒ€ê²Ÿ ê°ì²´ì—ì„œ ì‹¤ì œë¡œ í˜¸ì¶œë  ë©”ì„œë“œë¥¼ ë‚˜íƒ€ë‚´ëŠ” Method ê°ì²´</li>
              <li><code class="language-plaintext highlighter-rouge">Object[] args</code> : ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì „ë‹¬ë˜ëŠ” ì¸ì ëª©ë¡</li>
              <li><code class="language-plaintext highlighter-rouge">Object target</code> : ì‹¤ì œ íƒ€ì¼“ ê°ì²´</li>
            </ul>
          </li>
        </ul>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">package</span> <span class="nn">com.exam.aop.advice</span><span class="o">;</span>
        
  <span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
  <span class="kn">import</span> <span class="nn">org.springframework.aop.MethodBeforeAdvice</span><span class="o">;</span>
        
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">LogBeforeAdvice</span> <span class="kd">implements</span> <span class="nc">MethodBeforeAdvice</span> <span class="o">{</span>
        
  	<span class="nd">@Override</span>
  	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">(</span><span class="nc">Method</span> <span class="n">method</span><span class="o">,</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">target</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Throwable</span> <span class="o">{</span>
  		<span class="c1">// TODO Auto-generated method stub</span>
  		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Before ì‹¤í–‰ &gt;&gt;&gt; "</span><span class="o">);</span>
  	<span class="o">}</span>
        
  <span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>setting.xml ìƒì„± ë° ì„¤ì •</p>

    <p><em>ìŠ¤í”„ë§ì€ ê°ì²´ë¥¼ xmlì— ë“±ë¡í•˜ì—¬  Bean ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</em></p>

    <ol>
      <li>
        <p>Calculation ê°ì²´(íƒ€ê²Ÿ ê°ì²´), LogAroundAdvice ê°ì²´ ë“±ë¡</p>

        <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 	<span class="o">&lt;</span><span class="n">bean</span> <span class="n">id</span><span class="o">=</span><span class="s">"target"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">com</span><span class="o">.</span><span class="na">exam</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">entity</span><span class="o">.</span><span class="na">CalculationImpl</span><span class="s">"/&gt;
  	&lt;bean id="</span><span class="n">logAroundAdvice</span><span class="s">" class="</span><span class="n">com</span><span class="o">.</span><span class="na">exam</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">advice</span><span class="o">.</span><span class="na">LogAroundAdvice</span><span class="s">"/&gt;
 	&lt;bean id="</span><span class="n">logBeforeAdvice</span><span class="s">" class="</span><span class="n">com</span><span class="o">.</span><span class="na">exam</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">advice</span><span class="o">.</span><span class="na">LogBeforeAdvice</span><span class="s">"/&gt;
 	&lt;bean id="</span><span class="n">logAfterReturningAdvice</span><span class="s">" class="</span><span class="n">com</span><span class="o">.</span><span class="na">exam</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">advice</span><span class="o">.</span><span class="na">LogAfterReturningAdvice</span><span class="s">"/&gt;
 	&lt;bean id="</span><span class="n">logAfterThrowingAdvice</span><span class="s">" class="</span><span class="n">com</span><span class="o">.</span><span class="na">exam</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">advice</span><span class="o">.</span><span class="na">LogAfterThrowingAdvice</span><span class="err">"</span><span class="o">/&gt;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>Proxy ê°ì²´ ë“±ë¡</p>
        <ol>
          <li><code class="language-plaintext highlighter-rouge">&lt;property name="target" ref="target"/&gt;</code>
            <ul>
              <li>target : calculation ê°ì²´ì˜ id</li>
            </ul>
          </li>
          <li><code class="language-plaintext highlighter-rouge">&lt;property name="interceptorNames"&gt;</code>
            <ul>
              <li>ê³µí†µ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  handler ì„¤ì •</li>
              <li>list í˜•íƒœë¡œ ì—¬ëŸ¬ê°œ ì„¤ì •ê°€ëŠ¥, value ëŠ” handler beanì˜ id</li>
            </ul>
          </li>
        </ol>
      </li>
    </ol>

    <p><strong>setting.xml</strong></p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    
 	<span class="o">&lt;!--</span> <span class="n">proxy</span> <span class="n">ì„¤ì •</span> <span class="o">--&gt;</span>
 	<span class="o">&lt;</span><span class="n">bean</span> <span class="n">id</span><span class="o">=</span><span class="s">"proxy"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">framework</span><span class="o">.</span><span class="na">ProxyFactoryBean</span><span class="s">"&gt;
 		&lt;property name="</span><span class="n">target</span><span class="s">" ref="</span><span class="n">target</span><span class="s">"/&gt;
 		&lt;property name="</span><span class="n">interceptorNames</span><span class="err">"</span><span class="o">&gt;</span>
 			<span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span>
 				<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">logAroundAdvice</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
 				<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">classBeforeAdvisor</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
 				<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">logAfterReturningAdvice</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
 				<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">logAfterThrowingAdvice</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
 			<span class="o">&lt;/</span><span class="n">list</span><span class="o">&gt;</span>
 		<span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
 	<span class="o">&lt;/</span><span class="n">bean</span><span class="o">&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>main ì‹¤í–‰ ì½”ë“œ</p>

    <ol>
      <li>
        <p>setting íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°</p>

        <p><code class="language-plaintext highlighter-rouge">ApplicationContext context = new ClassPathXmlApplicationContext("com/exam/aop/setting.xml");</code></p>
      </li>
      <li>
        <p>beanì—ì„œ í”„ë¡ì‹œ ê°ì²´ ë¶ˆëŸ¬ì˜¤ê¸°</p>

        <p><code class="language-plaintext highlighter-rouge">Calculation calc = (Calculation)context.getBean("proxy");</code></p>
      </li>
    </ol>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">package</span> <span class="nn">com.exam.aop</span><span class="o">;</span>
    
 <span class="kn">import</span> <span class="nn">java.lang.reflect.InvocationHandler</span><span class="o">;</span>
    
 <span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.lang.reflect.Proxy</span><span class="o">;</span>
    
 <span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">org.springframework.context.support.ClassPathXmlApplicationContext</span><span class="o">;</span>
    
 <span class="kn">import</span> <span class="nn">com.exam.aop.entity.Calculation</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">com.exam.aop.entity.CalculationImpl</span><span class="o">;</span>
    
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Program</span> <span class="o">{</span>
    	
 	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    		
 		<span class="nc">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> 
 				<span class="k">new</span> <span class="nf">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="s">"com/exam/aop/setting.xml"</span><span class="o">);</span>
    		
 		<span class="nc">Calculation</span> <span class="n">calc</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Calculation</span><span class="o">)</span><span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="s">"proxy"</span><span class="o">);</span>
    		
 		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"total is %d\n"</span><span class="o">,</span><span class="n">calc</span><span class="o">.</span><span class="na">sum</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">5</span><span class="o">));</span>
 		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"total is %d\n"</span><span class="o">,</span><span class="n">calc</span><span class="o">.</span><span class="na">division</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">5</span><span class="o">));</span>
 	<span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>

    <p>ì¶œë ¥</p>

    <p><img src="../../../../assets/images/posts/web/2022-04-22-aop2-4.png" alt="Untitled" /></p>

    <ol>
      <li>ë¨¼ì € Around ì‹¤í–‰.</li>
      <li>íƒ€ê²Ÿ ê°ì²´ê°€ ì‹¤í–‰ ë˜ê¸° ì „, Before ì´ ì‹¤í–‰.</li>
      <li>íƒ€ê²Ÿ í˜¸ì¶œì´ ì •ìƒ ì¢…ë£Œë˜ì–´ AfterReturning ì‹¤í–‰.</li>
      <li>Around ì¢…ë£Œ</li>
      <li>mainì—ì„œ Aroundì˜ ë°˜í™˜ê°’ ì¶œë ¥</li>
    </ol>

    <p>+) ì˜ˆì™¸ ë°œìƒ ì¶œë ¥</p>

    <ul>
      <li>division í•¨ìˆ˜ì—ì„œ divided by zero ì˜ˆì™¸ë¥¼ ë°œìƒì‹œì¼°ë‹¤.</li>
      <li>
        <p>ì •ìƒ ì¢…ë£Œëœ ì½”ë“œì—ì„œëŠ” AfterReturningì´ ì‹¤í–‰ë˜ê³  ì˜ˆì™¸ê°€ ë°œìƒí•œ ì½”ë“œì—ì„œëŠ” AtferThrowingì´ ë°œìƒí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.</p>

        <p><img src="../../../../assets/images/posts/web/2022-04-22-aop2-2.png" alt="Untitled" /></p>
      </li>
    </ul>
  </li>
</ol>

<h3 id="point-cut-ì ìš©">Point Cut ì ìš©</h3>

<ul>
  <li>Point Cutì„ ì„¤ì •í•˜ì—¬ ê°ì²´ì˜ íŠ¹ì • ë©”ì†Œë“œì—ë§Œ ê³µí†µê¸°ëŠ¥(aspect)ì´ ìˆ˜í–‰ë˜ë„ë¡ í•´ë³´ì
    <ul>
      <li>PointCut í´ë˜ìŠ¤ë¥¼ ë§Œë“ ë‹¤.
        <ul>
          <li><code class="language-plaintext highlighter-rouge">&lt;bean id="classBeforeAdvisor"..</code>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">&lt;property name="mappedName" value="sum" /&gt;</code> : ë§¤ì¹­ë  í•¨ìˆ˜ì˜ ì´ë¦„ ì‘ì„±</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>íŠ¹ì • pointcutì—ë§Œ ì ìš©ë  advisor ê°ì²´ë¥¼ ë§Œë“ ë‹¤.
        <ul>
          <li><code class="language-plaintext highlighter-rouge">&lt;bean id="classBeforeAdvisor"..</code>
            <ul>
              <li><code class="language-plaintext highlighter-rouge">&lt;property name="advice" ref="logBeforeAdvice"/&gt;</code> : ì ìš©í•  advice</li>
              <li><code class="language-plaintext highlighter-rouge">&lt;property name="pointcut" ref="classPointCut"/&gt;</code> : adviceê°€ ì ìš©ë  point cut</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>ìƒˆë¡œ ìƒì„±í•œ advisor ê°ì²´ë¥¼ í”„ë¡ì‹œì— ì„¤ì •í•œë‹¤.</li>
    </ul>
  </li>
  <li>
    <p>setting.xml</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="o">&lt;</span><span class="n">bean</span> <span class="n">id</span><span class="o">=</span><span class="s">"classPointCut"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">NameMatchMethodPointcut</span><span class="s">"&gt;
    		
  	&lt;/bean&gt;
    
  	&lt;bean id="</span><span class="n">classBeforeAdvisor</span><span class="s">" class="</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">DefaultPointcutAdvisor</span><span class="s">"&gt;
  		&lt;property name="</span><span class="n">advice</span><span class="s">" ref="</span><span class="n">logBeforeAdvice</span><span class="s">"/&gt;
  		&lt;property name="</span><span class="n">pointcut</span><span class="s">" ref="</span><span class="n">classPointCut</span><span class="s">"/&gt;
  	&lt;/bean&gt;
    	
  	&lt;!-- proxy ì„¤ì • --&gt;
  	&lt;bean id="</span><span class="n">proxy</span><span class="s">" class="</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">aop</span><span class="o">.</span><span class="na">framework</span><span class="o">.</span><span class="na">ProxyFactoryBean</span><span class="s">"&gt;
  		&lt;property name="</span><span class="n">target</span><span class="s">" ref="</span><span class="n">target</span><span class="s">"/&gt;
  		&lt;property name="</span><span class="n">interceptorNames</span><span class="err">"</span><span class="o">&gt;</span>
  			<span class="o">&lt;</span><span class="n">list</span><span class="o">&gt;</span>
  				<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">logAroundAdvice</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
  				<span class="o">**&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">classBeforeAdvisor</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;**</span>
  				<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">logAfterReturningAdvice</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
  				<span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">logAfterThrowingAdvice</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
  			<span class="o">&lt;/</span><span class="n">list</span><span class="o">&gt;</span>
  		<span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
  	<span class="o">&lt;/</span><span class="n">bean</span><span class="o">&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì¶œë ¥ - sumë§Œ before ì ìš©</p>

    <p><img src="../../../../assets/images/posts/web/2022-04-22-aop2-3.png" alt="Untitled" /></p>
  </li>
</ul>

<p><br />
<br />
next!  <br />
<a href="https://yeonui-0626.github.io/spring/2022/04/22/web-aop3.html">AOP(3) AOP ì ìš©í•´ë³´ê¸°(with AspectJ)</a></p>

<p><br />
<br /></p>

<hr />

<blockquote>
  <p>ì°¸ê³ </p>

</blockquote>

<p><a href="https://www.youtube.com/watch?v=y2JkXjOocZ4">https://www.youtube.com/watch?v=y2JkXjOocZ4</a>  <br />
<a href="https://velog.io/@max9106/Spring-%ED%94%84%EB%A1%9D%EC%8B%9C-AOP-xwk5zy57ee">https://velog.io/@max9106/Spring-í”„ë¡ì‹œ-AOP-xwk5zy57ee</a>   <br />
<a href="https://docs.oracle.com/javase/8/docs/api/">https://docs.oracle.com/javase/8/docs/api/</a>   <br />
<a href="https://live-everyday.tistory.com/217">https://live-everyday.tistory.com/217</a>    <br />
<a href="https://multifrontgarden.tistory.com/228">https://multifrontgarden.tistory.com/228</a>     <br />
<a href="https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&amp;blogId=chocolleto&amp;logNo=30086011474">https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&amp;blogId=chocolleto&amp;logNo=30086011474</a></p>

<p>êµ¬í˜„ ì‹œ ì°¸ê³ </p>

<p><a href="https://turtles7.tistory.com/20">https://turtles7.tistory.com/20</a>    <br />
<a href="https://www.eclipse.org/aspectj/doc/released/progguide/index.html">https://www.eclipse.org/aspectj/doc/released/progguide/index.html</a></p>
:ET